<!DOCTYPE html>
<html lang="ja">
  <head>
      <meta charset="UTF-8">
      <link href="index.css" rel="stylesheet" type="text/css" media="all">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.0.0/p5.min.js"></script>
      <meta name="keywords" content="矢吹彩香, AyakaYabuki">
      <link rel="canonical" href="https://www.ayakayabuki.com/">
      <link rel="preconnect" href="https://fonts.googleapis.com">
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
      <script src="index.js"></script>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <title>Archives | Ayaka Yabuki</title>
  </head>
  <body>

    <div id="header_fetch_target">
    </div>

    <div class="contents_fadein">

        <div class="bodybox">

            <h1>Archives</h1>

            <div class="sort_var">
                <div onclick="categorySort('category_all')">
                    <p class="sort_all">ALL</p>
                </div>
                <div onclick="categorySort('category_mv')">
                    <p class="sort_mv">MV</p>
                </div>
                <div onclick="categorySort('category_play')">
                    <p class="sort_play">Play</p>
                </div>
            </div>

            <div class="lang_ja">
                <ul class="lang_ja archives_flex">
                </ul>
            </div>

            <div class="lang_en">
                <ul class="lang_en archives_flex">
                </ul>
            </div>
        </div>
    
    </div>

    <div id="footer_fetch_target">
    </div>

    <script>
        fetch('archives_data.json')
            .then(response => response.json())
            .then(data => {
                const containerJa = document.querySelector('.lang_ja.archives_flex');
                const containerEn = document.querySelector('.lang_en.archives_flex');

                data.forEach(archives => {
                    const categoryLabel = archives.category === 'category_mv' ? 'mv' : 'play';
                    
                    // 日本語版HTML
                    const htmlJa = `
                        <li class="archives_block sort_all_block ${archives.category}">
                            <a href="archives_detail.html?id=${archives.id}">
                                <img src="${archives.thumbnail}">
                            </a>
                            <p>${archives.index_ja}</p>
                        </li>`;
                    
                    // 英語版HTML
                    const htmlEn = `
                        <li class="archives_block sort_all_block ${archives.category}">
                            <a href="archives_detail.html?id=${archives.id}">
                                <img src="${archives.thumbnail}">
                            </a>
                            <p>${archives.title_en}</p>
                        </li>`;

                    if(containerJa) containerJa.insertAdjacentHTML('beforeend', htmlJa);
                    if(containerEn) containerEn.insertAdjacentHTML('beforeend', htmlEn);
                });
                
                // 生成後に言語表示とソートを再適用
                applyLanguage(lang, false);
                if (typeof categorySort === "function") categorySort('category_all', false);
            });
    </script>
  </body>
</html>
